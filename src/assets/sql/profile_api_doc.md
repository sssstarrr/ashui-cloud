# 个人中心相关接口文档

## 1. 获取个人信息

### 1.1 基本信息

> 请求路径：/api/system/user/profile
>
> 请求方式：GET
>
> 接口描述：该接口用于获取当前登录用户的个人信息

### 1.2 请求参数

请求头：

| 参数名 | 示例值                        | 备注      |
| ------ | ----------------------------- | --------- |
| token  | eyJhbGciOiJIUzI1NiIsInR5c... | JWT令牌值 |

### 1.3 响应数据

参数格式：application/json

参数说明：

| 参数名         | 类型   | 是否必须 | 备注                           |
| -------------- | ------ | -------- | ------------------------------ |
| code           | number | 必须     | 响应码，200 代表成功，其他代表失败 |
| msg            | string | 非必须   | 提示信息                       |
| data           | object | 非必须   | 返回的数据                     |
| \|- id         | number | 必须     | 用户ID                         |
| \|- username   | string | 必须     | 用户名（登录名）               |
| \|- nickname   | string | 必须     | 用户昵称                       |
| \|- email      | string | 非必须   | 用户邮箱                       |
| \|- mobile     | string | 非必须   | 手机号码                       |
| \|- gender     | string | 必须     | 用户性别（0男 1女 2未知）      |
| \|- avatar     | string | 非必须   | 头像地址                       |
| \|- createTime | string | 非必须   | 创建时间                       |
| \|- updateTime | string | 非必须   | 修改时间                       |
| \|- roles      | array  | 必须     | 用户拥有的角色                 |

响应数据样例：

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "id": 1,
    "username": "admin",
    "nickname": "系统管理员",
    "email": "admin@ashui.cloud",
    "mobile": "18593114301",
    "gender": "0",
    "avatar": "https://example.com/avatar.png",
    "createTime": "2023-11-23 18:00:00",
    "updateTime": "2023-11-23 18:00:00",
    "roles": [
      {
        "id": 1,
        "roleName": "超级管理员",
        "roleKey": "admin"
      }
    ]
  }
}
```

## 2. 更新个人信息

### 2.1 基本信息

> 请求路径：/api/system/user/profile
>
> 请求方式：PUT
>
> 接口描述：该接口用于更新当前登录用户的个人信息

### 2.2 请求参数

请求头：

| 参数名 | 示例值                        | 备注      |
| ------ | ----------------------------- | --------- |
| token  | eyJhbGciOiJIUzI1NiIsInR5c... | JWT令牌值 |

请求体格式：application/json

参数说明：

| 参数名   | 类型   | 是否必须 | 备注                      |
| -------- | ------ | -------- | ------------------------- |
| nickname | string | 非必须   | 用户昵称                  |
| email    | string | 非必须   | 用户邮箱                  |
| mobile   | string | 非必须   | 手机号码                  |
| gender   | string | 非必须   | 用户性别（0男 1女 2未知） |

请求参数样例：

```json
{
  "nickname": "于金金",
  "email": "yuxinta66@163.com",
  "mobile": "18593114301",
  "gender": "0"
}
```

### 2.3 响应数据

参数格式：application/json

参数说明：

| 参数名 | 类型   | 是否必须 | 备注                           |
| ------ | ------ | -------- | ------------------------------ |
| code   | number | 必须     | 响应码，200 代表成功，其他代表失败 |
| msg    | string | 非必须   | 提示信息                       |

响应数据样例：

```json
{
  "code": 200,
  "msg": "修改成功"
}
```

## 3. 修改用户密码

### 3.1 基本信息

> 请求路径：/api/system/user/profile/updatePwd
>
> 请求方式：PUT
>
> 接口描述：该接口用于修改当前登录用户的密码

### 3.2 请求参数

请求头：

| 参数名 | 示例值                        | 备注      |
| ------ | ----------------------------- | --------- |
| token  | eyJhbGciOiJIUzI1NiIsInR5c... | JWT令牌值 |

请求体格式：application/json

参数说明：

| 参数名    | 类型   | 是否必须 | 备注     |
| --------- | ------ | -------- | -------- |
| oldPassword | string | 必须     | 旧密码   |
| newPassword | string | 必须     | 新密码   |
| confirmPassword | string | 必须 | 确认密码 |

请求参数样例：

```json
{
  "oldPassword": "admin123",
  "newPassword": "admin456",
  "confirmPassword": "admin456"
}
```

### 3.3 响应数据

参数格式：application/json

参数说明：

| 参数名 | 类型   | 是否必须 | 备注                           |
| ------ | ------ | -------- | ------------------------------ |
| code   | number | 必须     | 响应码，200 代表成功，其他代表失败 |
| msg    | string | 非必须   | 提示信息                       |

响应数据样例：

```json
{
  "code": 200,
  "msg": "修改成功"
}
```

## 4. 上传用户头像

### 4.1 基本信息

> 请求路径：/api/system/user/profile/avatar
>
> 请求方式：POST
>
> 接口描述：该接口用于上传当前登录用户的头像

### 4.2 请求参数

请求头：

| 参数名 | 示例值                        | 备注      |
| ------ | ----------------------------- | --------- |
| token  | eyJhbGciOiJIUzI1NiIsInR5c... | JWT令牌值 |

请求体格式：multipart/form-data

参数说明：

| 参数名 | 类型 | 是否必须 | 备注     |
| ------ | ---- | -------- | -------- |
| file   | file | 必须     | 头像文件 |

### 4.3 响应数据

参数格式：application/json

参数说明：

| 参数名 | 类型   | 是否必须 | 备注                           |
| ------ | ------ | -------- | ------------------------------ |
| code   | number | 必须     | 响应码，200 代表成功，其他代表失败 |
| msg    | string | 非必须   | 提示信息                       |
| data   | object | 非必须   | 返回的数据                     |
| \|- url | string | 必须     | 头像访问路径                   |

响应数据样例：

```json
{
  "code": 200,
  "msg": "上传成功",
  "data": {
    "url": "https://example.com/profile/avatar/2023/11/23/user_1.jpg"
  }
}
```

## 5. 个人中心需求说明

1. 个人信息管理：
   - 用户可以查看自己的基本信息，包括用户名、昵称、邮箱、手机号、性别等
   - 用户可以修改自己的昵称、邮箱、手机号和性别
   - 用户名（登录名）不允许修改
   - 用户可以上传和更新自己的头像

2. 密码管理：
   - 用户可以修改自己的登录密码
   - 修改密码时需要输入旧密码进行验证
   - 新密码需要二次确认
   - 新密码需要符合密码复杂度要求（至少8位，包含大小写字母和数字）

3. 安全要求：
   - 所有接口需要验证用户的登录状态（验证token）
   - 只能查看和修改自己的个人信息，不允许操作其他用户的信息
   - 修改敏感信息（如密码）时记录操作日志
   - 密码在传输和存储过程中需要加密

4. 操作日志：
   - 记录用户更新个人信息的操作
   - 记录用户修改密码的操作
   - 记录用户更新头像的操作 